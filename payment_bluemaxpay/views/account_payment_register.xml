<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_account_payment_register_form" model="ir.ui.view">
        <field name="name">account.payment.register.form</field>
        <field name="model">account.payment.register</field>
        <field name="inherit_id" ref="account.view_account_payment_register_form" />
        <field name="arch" type="xml">
            <xpath expr="//group[@name='group2']" position="after">
                <field name="acquirer_id" invisible="1" />
                <field name="is_bluemaxpay" invisible="1" />
                <group attrs="{'invisible':[('is_bluemaxpay','!=',True)]}">
                    <field name="is_card" />
                    <field name="save_card" attrs="{'invisible':[('is_card','!=',True)]}" />
                    <field name="card_id" attrs="{'invisible':[('is_card','=',True)]}" />
                </group>
            </xpath>
            <xpath expr="//footer" position="before">
                <group string="Card Details" attrs="{'invisible': [('is_card', '!=', True)]}">
                    <group>
                        <field name="card_type" widget="radio" options="{'horizontal': true}" />
                        <field name="card_number" attrs="{'required':[('is_card','=',True)]}" />
                        <field name="card_name" attrs="{'required':[('is_card','=',True)]}" />
                        <field name="card_cvv" attrs="{'required':[('is_card','=',True)]}" />
                    </group>
                    <group>
                        <field name="card_expiry_month" attrs="{'required':[('is_card','=',True)]}" />
                        <field name="card_expiry_year" attrs="{'required':[('is_card','=',True)]}" />
                        <field name="token_name" attrs="{'invisible': [('save_card', '!=', True)],'required':[('save_card', '=', True),('is_card','=',True)]}" />
                    </group>
                </group>
            </xpath>
            <xpath expr="//footer" position="replace">
                <footer>
                    <button string="Create Payment" id="action_create_payments" name="action_create_payments" type="object" class="oe_highlight" data-hotkey="q" />
                    <button string="Cancel" class="btn btn-secondary" special="cancel" data-hotkey="z" />
                </footer>
            </xpath>
        </field>
    </record>
    <record id="bluemaxpay_transaction" model="ir.actions.act_window">
        <field name="name">BlueMax Pay</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">bluemaxpay.transaction</field>
        <field name="view_mode">tree,form</field>
    </record>
    <menuitem id="bluemaxpay_transaction_menu" name="BlueMax Pay Transaction" parent="account.root_payment_menu" action="bluemaxpay_transaction" sequence="20" />
    <menuitem id="bluemaxpay_transaction_website_menu" name="BlueMax Pay Transaction" parent="website_sale.menu_ecommerce_settings" action="bluemaxpay_transaction" sequence="20" />
</odoo>