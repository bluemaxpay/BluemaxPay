<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="website_sale.payment_footer" name="Payment">
        <xpath expr="." position="replace">
            <div name="o_checkbox_container" class="custom-control custom-checkbox mt-2 o_accept_tc_button" />
            <div class="float-left mt-2">
                <a role="button" href="/shop/cart" class="btn btn-secondary">
                    <i class="fa fa-chevron-left" />
                    Return to Cart
                </a>
            </div>
            <div class="float-right mt-2" id="paynow_button">
                <button name="o_payment_submit_button" type="submit" class="btn btn-primary" disabled="true" data-icon-class="fa-chevron-right">
                    <t t-esc="submit_button_label" />
                    <i class="fa fa-chevron-right" />
                </button>
            </div>
        </xpath>
    </template>
    <template id="bluemaxpay_form">
        <div class="card_form_details">
            <div class="row">
                <div class="col-sm-4 form-group">
                    <t t-if="not user_id._is_public()">
                        <input type="checkbox" id="is_card" name="is_card" />
                        <label for="is_card">Use Saved Card</label>
                    </t>
                </div>
                <div class="col-sm-4 form-group" id="is-card-save">
                    <input type="checkbox" id="is_card_save" name="is_card_save" />
                    <label for="is_card_save">Save Card</label>
                </div>
                <t t-set="token" t-value="request.env['bluemax.token'].sudo().search([('partner_id', '=', partner_id)])" />
                <div class="col-md-12 d-none" id="bluemaxpay-token">
                    <label class="font-weight-normal device" for="token">
                        Saved Tokens
                    </label>
                    <select id="token" name="token" t-att-value="token" class="form-control o_website_form_input" required="">
                        <option value="" />
                        <t t-foreach="token" t-as="token">
                            <option t-att-value="token['id']">
                                <t t-esc="token['name']" />
                            </option>
                        </t>
                    </select>
                </div>
                <div class="col-sm-12 form-group" id="card_number">
                    <label class="col-form-label">Card Number</label>
                    <input type="text" id='card-number' required="" maxlength="19" class="form-control" />
                </div>
                <div class="col-sm-5 form-group" id="card_name">
                    <label class="col-form-label">Name On Card</label>
                    <input type="text" id='card-name' required="" class="form-control" />
                </div>
                <div class="col-sm-5 form-group" id="card_exp_month">
                    <label>Expiry Month</label>
                    <input type="number" id='card-exp-month' placeholder="MM" min="1" max="12" required="" class="form-control" />
                </div>
                <div class="col-sm-5 form-group" id="card_exp_year">
                    <label>Expiry Year</label>
                    <input type="number" id='card-exp-year' placeholder="YYYY" maxlength="4" required="" class="form-control" />
                </div>
                <div class="col-sm-5 form-group" id="card_code">
                    <label>Card Code</label>
                    <input type="number" id='card-code' max="9999" class="form-control" />
                </div>
            </div>
        </div>
        <!--        <div id="credit-card">-->
        <!--            <br/>-->
        <!--        </div>-->
        <!--        <div id="payment-form" method="post" action="/payment/process">-->
        <!--        </div>-->
    </template>
    <record id="view_payment_transaction_form" model="ir.ui.view">
        <field name="name">payment.transaction.form</field>
        <field name="model">payment.transaction</field>
        <field name="inherit_id" ref="payment.payment_transaction_form" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='partner_lang']" position="after">
                <field name="bluemaxpay_trans_id" />
                <field name="captured_amount"/>
                <field name="payment_type" invisible="1"/>
            </xpath>
            <xpath expr="//sheet//div[@name='button_box']" position="inside">
                <button name="action_view_bluemaxpay_trans" type="object" class="oe_stat_button" icon="fa-money" attrs="{'invisible': [('bluemaxpay_trans_id', '=', False)]}">
                    <field name="bluemaxpay_trans_count" widget="statinfo" string="BlueMax Pay Transaction(s)" />
                </button>
            </xpath>
        </field>
    </record>
</odoo>
